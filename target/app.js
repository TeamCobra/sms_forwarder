// Generated by CoffeeScript 1.8.0
var app, bodyParser, express, forwardMessage, request, setUrl;

express = require("express");

request = require("request");

bodyParser = require("body-parser");

app = express();

forwardMessage = function(req, res) {
  var message, url;
  message = req.body.Body;
  url = "" + process.env.FORWARD_URL + "?" + process.env.FORWARD_ATTR + "=" + message;
  request.post(url);
  return res.sendStatus(200);
};

setUrl = function(req, res) {
  process.env.FORWARD_URL = req.body.forwardUrl;
  process.env.FORWARD_ATTR = req.body.forwardAttr;
  return res.sendStatus(200);
};

app.use(bodyParser.urlencoded({
  extended: false
}));

app.post("/message", forwardMessage);

app.post("/url", setUrl);

app.listen(process.env.PORT || 8080);
